<!doctype html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Online Delivery Service And Market Place">
    <meta name="keywords" content="delivery, market, enroute24, 24">
    <meta name="author" content="tagsmann">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Enroute24 | <%=user.fname || Profile%></title>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <link type="text/css" rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/home.min.css">

    <!--<link type="text/css" rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="/bower_components/fontawesome/css/all.css">-->
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="css/styles.css?v=1.0">

</head>

<body class="container-fluid">


    <%- include('partials/header') -%>
    <%- messages('message_template', locals) %>

    <div class="row nav_and_content justify-content-around">

        <%- include('partials/nav-template') -%>

        <div class="col-12 col-lg-9 page_content justify-content-around">



            <small><%=user%></small>


            <h1 class="text-center"><%=user.fname%>'s Account</h1>
            <h6 class="text-center">Make changes to your account.</h6><br>

            <div class="row">

                <form method="post" action="/users/profile/image/<%=user._id%>" enctype="multipart/form-data" id="profileImageForm" class="col-12 col-lg-4 justify-content-center">


                    <% if(errors){ %>
                    <div>
                        <p class="row alert alert-danger"><%=errors[0].msg %></p>
                    </div>
                    <%}%>
                
        <div class="row justify-content-center">
            <div class="row col-4 col-md-3 col-lg-8 justify-content-center">
            <img src="<%=user.image%>" class="col-12" alt="<%=user.fname%>'s profile image"/>
                    <button class="btn btn-danger delete-profile-image" style="margin: 2px;" data-id="<%=(JSON.stringify({id:id, image:image}))%>" title="Delete Image"><i class="fas fa-trash-alt"></i></button>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-4 col-lg-10">
                <input type="file" name="image" placeholder="Profile Image" class="form-control form-control-sm ">
                <input type="submit" value="Upload Image" class="btn btn-primary">
            </div>
        </div>
        </form>

        <form method="post" action="/users/profile/<%=user._id%>" id="profileForm" class="col-12 col-lg-8">

            <div class="offset-2 col-8">
                <div class="row form-group">
                    <label for="fname" style="font-weight: 100;">First Name</label>
                    <input type="text" name="fname" placeholder="First name" class="form-control form-control-sm" value="<%=user.fname%>">
                </div>

                <div class="row form-group">
                    <label for="lname" style="font-weight: 100;">Last Name</label>
                    <input type="text" name="lname" placeholder="Last name" class="form-control form-control-sm" value="<%=user.lname%>">
                </div>

                <div class="row form-group">
                    <label for="email" style="font-weight: 100;">Email</label>
                    <input type="email" name="email" placeholder="Email" class="form-control form-control-sm" value="<%=user.email%>">
                </div>

                <div class="row form-group">
                    <label for="phone" style="font-weight: 100;">Phone</label>
                    <input type="text" name="phone" placeholder="Phone" class="form-control form-control-sm" value="<%=user.phone%>">

                </div>

                <div class="row form-group" style="font-weight: 100;">
                    <label for="username">Username</label>
                    <input type="text" name="username" placeholder="Username" class="form-control form-control-sm" value="<%=user.username%>">
                    <small>Username cannot be changed.</small>
                </div>

                <div class="row form-group">
                    <label for="password" style="font-weight: 100;">Password</label>
                    <input type="password" name="password" placeholder="Enter your password" class="form-control form-control-sm" autocomplete="off">
                </div>
            </div>
            <hr>

            <div class="row form-group justify-content-around">
                <button type="submit" class="btn btn-success">Update Account</button>
                <a href="/users/profile/security/<%=user._id%>" class="btn btn-warning">Change Password</a>
                <button class="btn btn-danger delete-account" data-id="<%=user._id%>">Delete Account</button>
            </div>
        </form>
    </div>

    </div>
    </div>

    <%- include('partials/footer') -%>

    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/del.js"></script>
</body>

</html>
